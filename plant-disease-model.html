<!DOCTYPE html>
<html>
<head>
  <title>Plant Disease Detection</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image"></script>
</head>
<body>
  <h1>Plant Disease Detection</h1>
  <p>Select an image of a plant leaf to detect diseases:</p>
  <input type="file" id="imageUpload" accept="image/*" />
  <p id="result">Model loading...</p>
  <script>
    const modelURL = "plant-disease-model\model.json""; // Path to your model.json file

    let model;
    async function loadModel() {
      model = await tmImage.load(modelURL);
      document.getElementById("result").innerText = "Model Loaded!";
    }

    async function predict(file) {
      const image = document.createElement("img");
      image.src = URL.createObjectURL(file);
      await image.decode();
      const predictions = await model.predict(image);

      let resultText = "Detection Results:\n";
      predictions.forEach((prediction) => {
        resultText += `${prediction.className}: ${(prediction.probability * 100).toFixed(2)}%\n`;
      });

      document.getElementById("result").innerText = resultText;
    }

    document.getElementById("imageUpload").addEventListener("change", (event) => {
      predict(event.target.files[0]);
    });

    loadModel();
  </script>
</body>
</html>
